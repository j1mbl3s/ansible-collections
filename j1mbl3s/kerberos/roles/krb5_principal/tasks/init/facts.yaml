---
- name: Initialize kadmin command prefix fact
  ansible.builtin.set_fact:
    krb5_principal_kadmin_command_init: >-
      /usr/bin/kadmin
      {{
        (
          ('-r ' + krb5_principal_realm + ' ')
          if krb5_principal_realm | length > 0 else
          ''
        ) + '-p ' + krb5_principal_admin_name + (
          (' -kt ' + krb5_principal_admin_keytab)
          if krb5_principal_admin_keytab | default(None) != None else
          ''
        )
      }}

- name: Initialize kadmin command responses fact
  ansible.builtin.set_fact:
    krb5_principal_kadmin_responses_init: >-
      {{
        {}
        if krb5_principal_admin_keytab | default(None) != None else
        { 'Password for': krb5_principal_admin_password }
      }}
  no_log: true
...
